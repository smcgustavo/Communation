"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class SessionsController {
    async index({ view, auth, response }) {
        await auth.use('web').authenticate();
        if (auth.use('web').isLoggedIn || auth.use('web').isAuthenticated) {
            response.redirect().toRoute('posts.index');
        }
        else {
            return view.render('sessions/create');
        }
    }
    async store({ auth, request, response }) {
        const email = request.input('email');
        const password = request.input('password');
        console.log(email);
        console.log(password);
        try {
            await auth.use('web').attempt(email, password);
            response.redirect().toRoute('posts.index');
        }
        catch {
            return response.badRequest('Invalid');
        }
    }
}
exports.default = SessionsController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2Vzc2lvbnNDb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiU2Vzc2lvbnNDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsTUFBcUIsa0JBQWtCO0lBRTlCLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBc0I7UUFDNUQsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLFlBQVksRUFBRSxDQUFBO1FBQ3BDLElBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxlQUFlLEVBQUM7WUFDL0QsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQTtTQUMzQzthQUNHO1lBQ0YsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUM7U0FDdkM7SUFDSCxDQUFDO0lBQ00sS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFzQjtRQUMvRCxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQ3BDLE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUE7UUFFMUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUNsQixPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBRXJCLElBQUc7WUFDRCxNQUFNLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBQyxRQUFRLENBQUMsQ0FBQTtZQUM3QyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFBO1NBQzNDO1FBQ0QsTUFBTTtZQUNKLE9BQU8sUUFBUSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQTtTQUN0QztJQUNILENBQUM7Q0FDRjtBQTFCRCxxQ0EwQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEh0dHBDb250ZXh0Q29udHJhY3QgfSBmcm9tICdAaW9jOkFkb25pcy9Db3JlL0h0dHBDb250ZXh0J1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXNzaW9uc0NvbnRyb2xsZXIge1xuICBcbiAgcHVibGljIGFzeW5jIGluZGV4KHt2aWV3LCBhdXRoLCByZXNwb25zZX06IEh0dHBDb250ZXh0Q29udHJhY3QgKXtcbiAgICBhd2FpdCBhdXRoLnVzZSgnd2ViJykuYXV0aGVudGljYXRlKClcbiAgICBpZihhdXRoLnVzZSgnd2ViJykuaXNMb2dnZWRJbiB8fCBhdXRoLnVzZSgnd2ViJykuaXNBdXRoZW50aWNhdGVkKXtcbiAgICAgIHJlc3BvbnNlLnJlZGlyZWN0KCkudG9Sb3V0ZSgncG9zdHMuaW5kZXgnKVxuICAgIH1cbiAgICBlbHNle1xuICAgICAgcmV0dXJuIHZpZXcucmVuZGVyKCdzZXNzaW9ucy9jcmVhdGUnKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGFzeW5jIHN0b3JlKHthdXRoLCByZXF1ZXN0LCByZXNwb25zZX06IEh0dHBDb250ZXh0Q29udHJhY3QgKXtcbiAgICBjb25zdCBlbWFpbCA9IHJlcXVlc3QuaW5wdXQoJ2VtYWlsJylcbiAgICBjb25zdCBwYXNzd29yZCA9IHJlcXVlc3QuaW5wdXQoJ3Bhc3N3b3JkJylcblxuICAgIGNvbnNvbGUubG9nKGVtYWlsKVxuICAgIGNvbnNvbGUubG9nKHBhc3N3b3JkKVxuXG4gICAgdHJ5e1xuICAgICAgYXdhaXQgYXV0aC51c2UoJ3dlYicpLmF0dGVtcHQoZW1haWwscGFzc3dvcmQpXG4gICAgICByZXNwb25zZS5yZWRpcmVjdCgpLnRvUm91dGUoJ3Bvc3RzLmluZGV4JylcbiAgICB9IFxuICAgIGNhdGNoIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5iYWRSZXF1ZXN0KCdJbnZhbGlkJylcbiAgICB9XG4gIH1cbn0iXX0=